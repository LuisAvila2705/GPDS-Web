<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#177e69" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EcoLink - Crear Usuario</title>

  <!-- RUTA ABSOLUTA -->
  <link rel="stylesheet" href="/css/CrearUsuario.css" />

  <!-- Importante: el JS es m√≥dulo y ruta absoluta -->
  <script type="module" src="/js/CrearUsuario.js" defer></script>
</head>
<body>

  <!-- Encabezado -->
  <header>
    <nav class="navbar">
      <div class="spacer"></div>
      <div class="logo">
        <a href="/Inicio.html">
          <img src="/assets/logo.png" class="logo-img" alt="EcoLink Logo">
        </a>
      </div>
      <div class="spacer"></div>
    </nav>
  </header>

  <!-- Ruta de navegaci√≥n -->
  <nav class="breadcrumb">
    <a href="/Inicio.html">Inicio</a> &gt;
    <a href="/login.html">Acceder a mi cuenta</a> &gt;
    <span>Crear cuenta</span>
  </nav>

  <!-- Formulario -->
  <section class="formulario-creacion">
    <h2>Crear mi cuenta</h2>

    <!-- Form con validaciones -->
    <form class="registro-form" id="registroForm" novalidate>
      <label class="subtitulo">Datos b√°sicos</label>

      <input id="nombre" name="nombre" type="text"
             placeholder="Nombre completo"
             pattern="^[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√±√ë ]{2,60}$"
             title="Solo letras y espacios, 2 a 60 caracteres" required />
      <small id="err-nombre" class="err" aria-live="polite"></small>

      <input id="email" name="email" type="email"
             placeholder="Correo electr√≥nico" required />
      <small id="err-email" class="err" aria-live="polite"></small>

      <input id="email2" name="email2" type="email"
             placeholder="Repetir correo" required />
      <small id="err-email2" class="err" aria-live="polite"></small>

      <small>La contrase√±a debe tener m√≠nimo 10 caracteres, con may√∫scula, min√∫scula, n√∫mero y car√°cter especial.</small>
      <input id="password" name="password" type="password"
             placeholder="Crea tu contrase√±a"
             autocomplete="new-password" required />
      <!-- Medidor de fuerza -->
      <div id="pwd-meter" class="pwd-meter" aria-hidden="true">
        <div id="pwd-bar" class="pwd-bar"></div>
      </div>
      <small id="err-password" class="err" aria-live="polite"></small>

      <!-- Tel√©fono (obligatorio, 10 d√≠gitos MX) -->
      <label class="subtitulo" for="telefono">Tel√©fono (10 d√≠gitos)</label>
      <input
        id="telefono"
        name="telefono"
        type="tel"
        placeholder="Ej. 8123456789"
        inputmode="numeric"
        maxlength="14"
        pattern="^[0-9]{10}$"
        title="Debe tener exactamente 10 d√≠gitos (ej. 8123456789)"
        required
      />

      <!-- Ciudad / Municipio de Nuevo Le√≥n (obligatorio) -->
      <label class="subtitulo" for="ciudad">Municipio (Nuevo Le√≥n)</label>
      <select id="ciudad" name="ciudad" required>
        <option value="" disabled selected>Selecciona tu municipio</option>
        <option>Abasolo</option>
        <option>Agualeguas</option>
        <option>Los Aldamas</option>
        <option>Allende</option>
        <option>An√°huac</option>
        <option>Apodaca</option>
        <option>Aramberri</option>
        <option>Bustamante</option>
        <option>Cadereyta Jim√©nez</option>
        <option>El Carmen</option>
        <option>Cerralvo</option>
        <option>China</option>
        <option>Ci√©nega de Flores</option>
        <option>Doctor Arroyo</option>
        <option>Doctor Coss</option>
        <option>Doctor Gonz√°lez</option>
        <option>Galeana</option>
        <option>Garc√≠a</option>
        <option>San Pedro Garza Garc√≠a</option>
        <option>General Bravo</option>
        <option>General Escobedo</option>
        <option>General Ter√°n</option>
        <option>General Trevi√±o</option>
        <option>General Zaragoza</option>
        <option>General Zuazua</option>
        <option>Guadalupe</option>
        <option>Los Herreras</option>
        <option>Higueras</option>
        <option>Hidalgo</option>
        <option>Hualahuises</option>
        <option>Iturbide</option>
        <option>Ju√°rez</option>
        <option>Lampazos de Naranjo</option>
        <option>Linares</option>
        <option>Mar√≠n</option>
        <option>Melchor Ocampo</option>
        <option>Mier y Noriega</option>
        <option>Mina</option>
        <option>Montemorelos</option>
        <option>Monterrey</option>
        <option>Par√°s</option>
        <option>Pesquer√≠a</option>
        <option>Los Ramones</option>
        <option>Rayones</option>
        <option>Sabinas Hidalgo</option>
        <option>Salinas Victoria</option>
        <option>San Nicol√°s de los Garza</option>
        <option>Santa Catarina</option>
        <option>Santiago</option>
        <option>Vallecillo</option>
        <option>Villaldama</option>
      </select>

      <label class="subtitulo" for="foto">Foto de perfil (recomendable)</label>
      <div class="file">
        <input class="input-file" type="file" id="foto" accept="image/*" />
        <label for="foto" class="fake">üì∑ Elegir foto</label>
        <span class="hint" id="hintFoto">JPG/PNG ¬∑ m√°x. 4 MB</span>
      </div>
      <div id="fotoPreviewWrap" class="preview" style="max-width:140px;">
        <img id="fotoPreview" alt="" style="display:none;border-radius:12px;border:1px solid #e6efec;">
      </div>

      <!-- rol base -->
      <input type="hidden" id="rol" name="rol" value="ciudadano" />

      <label class="terminos">
        <input type="checkbox" id="acepta" required />
        Acepto la pol√≠tica de privacidad y los t√©rminos de uso.
      </label>
      <small id="err-acepta" class="err" aria-live="polite"></small>

      <button type="submit" class="btn-crear-cuenta" id="btnCrear" disabled>Crear mi cuenta</button>
      <p id="msg" aria-live="polite"></p>
    </form>
  </section>

  <!-- Registro del Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/serviceWorker.js')
          .then(reg => console.log('SW registrado', reg.scope))
          .catch(err => console.error('Error SW', err));
      });
    }
  </script>
</body>
</html>
